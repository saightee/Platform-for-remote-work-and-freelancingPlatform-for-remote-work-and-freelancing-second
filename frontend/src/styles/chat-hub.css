:root{
  --ch-accent: #4e74c8;
  --ch-bg: #ffffff;
  --ch-text: #1b1f2a;
  --ch-muted: #6b7280;
  --ch-card-shadow: 0 10px 30px rgba(18,33,73,0.12);
  --ch-card-shadow-sm: 0 6px 18px rgba(18,33,73,0.10);
  --ch-radius: 12px;
  --ch-border: #e9edfa;
}

/* контейнер страницы */
.ch-shell{ max-width:1100px; margin:10px -32px; padding:0 16px; }

/* белая карточка-обёртка на всю высоту вьюпорта */
.ch-card{
  background:var(--ch-bg);
  border-radius:var(--ch-radius);
  box-shadow:var(--ch-card-shadow);
  padding:24px;
  display:grid;
  grid-template-rows:auto 1fr;
  height:calc(100dvh - 170px);
  color:var(--ch-text);
}

.ch-headrow{ display:grid; gap:12px; margin-bottom:16px; }
.ch-title{ margin:0 0 4px; font-size:26px; font-weight:800; display:flex; align-items:center; gap:8px; }
.ch-subtitle{ margin:0; color:var(--ch-muted); }

/* уведомления */
.ch-alert{ border-radius:10px; padding:10px 12px; font-size:14px; box-shadow:var(--ch-card-shadow-sm); }
.ch-alert--err{ background:#fdecea; color:#8a231f; }
.ch-alert--ok{ background:#e9f7ef; color:#1c6b3c; }

/* двухколоночная сетка: слева список, справа чат */
.ch-layout{
  display:grid;
  grid-template-columns: 320px 1fr;
  gap:16px;
  height:100%;
  min-height:0; /* позволяет дочерним скроллиться */
}

/* СЛЕВА — список чатов */
.ch-sidebar{
  border:1px solid var(--ch-border);
  border-radius:var(--ch-radius);
  padding:14px;
  background:var(--ch-bg);
  box-shadow:var(--ch-card-shadow-sm);

  display:grid;
  grid-template-rows: auto 1fr; /* заголовок фикс, список скроллится */
  overflow:hidden;
  min-height:0;
}
.ch-sidebar__title{ margin:0 0 8px; font-size:16px; font-weight:700; color:var(--ch-text); }

.ch-chatlist{
  list-style:none; padding:0; margin:0;
  display:grid; gap:8px;
  min-height:0;
  overflow-y:auto;
  scrollbar-gutter:stable;
  overscroll-behavior:contain;
}

.ch-chatlist__item{
  display:grid; grid-template-columns:1fr auto; gap:10px;
  padding:10px; border:1px solid var(--ch-border);
  border-radius:10px; cursor:pointer;
  transition: box-shadow .15s ease, transform .05s ease, border-color .15s ease, background .15s ease;
  background:#fff;
}
.ch-chatlist__item:hover{ transform:translateY(-1px); border-color:#dfe6ff; }
.ch-chatlist__item.is-active{ border-color:var(--ch-accent); box-shadow:0 0 0 3px rgba(78,116,200,.12); }
.ch-chatlist__item.has-unread{ background:#f7f9ff; }

.ch-chatlist__meta{ display:grid; gap:4px; }
.ch-chatlist__row{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.ch-chatlist__job{ color:var(--ch-text); font-weight:700; }
.ch-chatlist__partner{ font-size:13px; color:var(--ch-muted); }
.ch-chatlist__badge{
  background:var(--ch-accent); color:#fff; font-size:12px;
  padding:2px 6px; border-radius:999px;
}

/* общие мини-кнопки в шапке чата */
.ch-miniBtn{
  display:inline-flex; align-items:center; justify-content:center;
  height:32px; padding:0 10px; gap:6px;
  border:none; border-radius:8px; background:#f1f4ff; color:var(--ch-accent);
  cursor:pointer; font-weight:600; font-size:13px;
}
.ch-miniBtn:hover{ box-shadow:var(--ch-card-shadow-sm); transform:translateY(-1px); }

/* СПРАВА — карточка чата */
.ch-chat{
  border:1px solid var(--ch-border);
  border-radius:var(--ch-radius);
  background:#fff;
  box-shadow:var(--ch-card-shadow-sm);
  display:grid;
  grid-template-rows: auto 1fr auto; /* head / thread / composer */
  min-height:0;
}
.ch-chat__head{
  padding:14px 16px; border-bottom:1px solid #eef1ff;
  display:flex; align-items:center; gap:12px;
}
.ch-chat__title{ margin:0; font-size:16px; color:var(--ch-text); }
.ch-chat__title span{ font-weight:700; }
.ch-chat__actions{ margin-left:auto; display:flex; gap:10px; }

/* лента сообщений (скролл) */
.ch-thread{
  padding:16px;
  display:grid;
  gap:10px;
  overflow-y:auto;
  min-height:0;
  scrollbar-gutter:stable;
}

/* сообщения-баблы */
.ch-bubble{
  max-width:82%;
  padding:10px 12px;
  border-radius:12px;
  box-shadow:var(--ch-card-shadow-sm);
  border:1px solid #e9edfa;
  background:#f7f9ff;
}
.ch-bubble--me{
  margin-left:auto;
  background:#eaf1ff;
  border-color:#d9e5ff;
}
.ch-bubble--them{
  margin-right:auto;
  background:#f7f9ff;
  border-color:#ebf0ff;
}
.ch-bubble__text{ white-space:pre-wrap; color:var(--ch-text); }
.ch-bubble__meta{ margin-top:6px; display:flex; gap:8px; font-size:12px; color:var(--ch-muted); }
.ch-read.is-read{ color:#1c6b3c; }
.ch-typing{ font-size:13px; color:var(--ch-muted); }

/* композер */
.ch-composer{
  display:grid; grid-template-columns:1fr auto; gap:8px;
  padding:12px; border-top:1px solid #eef1ff;
}
.ch-input{
  width:100%; border:1px solid #e3e6ef; border-radius:10px;
  padding:12px 14px; font-size:15px; outline:none;
  transition: box-shadow .15s ease, border-color .15s ease;
}
.ch-input:focus{ border-color:var(--ch-accent); box-shadow:0 0 0 4px rgba(78,116,200,.12); }

.ch-send{
  width:48px; height:48px; border:none; border-radius:10px;
  background:var(--ch-accent); color:#fff; box-shadow:var(--ch-card-shadow-sm);
  cursor:pointer; display:inline-flex; align-items:center; justify-content:center;
  font-size:20px;
}
.ch-send:hover{ box-shadow:var(--ch-card-shadow); transform:translateY(-1px); }

.ch-composer.is-disabled .ch-input{ opacity:.6; cursor:not-allowed; }
.ch-composer.is-disabled .ch-send{ opacity:.5; cursor:not-allowed; }

/* muted текст */
.ch-muted{ color:var(--ch-muted); padding-left:30px; }

/* модалки */
.ch-modal{ position:fixed; inset:0; background:rgba(9,13,28,.35); display:grid; place-items:center; padding:16px; z-index:50; }
.ch-modal__content{ width:100%; max-width:520px; background:#fff; border-radius:12px; padding:18px; box-shadow:var(--ch-card-shadow); position:relative; }
.ch-modal__close{ position:absolute; top:10px; right:12px; background:#fff; border:none; font-size:24px; line-height:1; cursor:pointer; color:#333; }

.ch-form{ display:grid; gap:14px; }
.ch-form__row{ display:grid; gap:8px; }
.ch-label{ font-size:14px; font-weight:600; color:var(--ch-text); }
.ch-textarea{
  width:100%; border:1px solid #e3e6ef; border-radius:10px;
  padding:10px 12px; font-size:15px; outline:none; resize:vertical;
}
.ch-textarea:focus{ border-color:var(--ch-accent); box-shadow:0 0 0 4px rgba(78,116,200,.12); }
.ch-btn{
  align-self:start; background:var(--ch-accent); color:#fff; border:none;
  border-radius:10px; padding:10px 16px; font-weight:700; cursor:pointer;
  box-shadow:var(--ch-card-shadow-sm);
}
.ch-btn:hover{ box-shadow:var(--ch-card-shadow); transform:translateY(-1px); }

/* вкладки вакансий и массовая рассылка */
.ch-jobs{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin:8px 0 12px; }
.ch-jobs__tabs{ display:flex; gap:8px; overflow:auto; }
.ch-jobs__tab{ white-space:nowrap; border:1px solid #e5e7eb; background:#fff; padding:6px 10px; border-radius:10px; cursor:pointer; }
.ch-jobs__tab.is-active{ background:#eef2ff; border-color:#c7d2fe; }
.ch-broadcast{ display:flex; align-items:center; gap:8px; border:1px solid #e5e7eb; background:#fff; padding:6px 10px; border-radius:10px; cursor:pointer; }

/* единый вид скроллбаров (список чатов + лента сообщений) */
.ch-thread::-webkit-scrollbar,
.ch-chatlist::-webkit-scrollbar{ width:10px; }
.ch-thread::-webkit-scrollbar-thumb,
.ch-chatlist::-webkit-scrollbar-thumb{
  background:#dfe6ff; border-radius:10px; border:2px solid #f6f8ff;
}
.ch-thread::-webkit-scrollbar-track,
.ch-chatlist::-webkit-scrollbar-track{ background:transparent; }
/* Firefox */
.ch-thread, .ch-chatlist{ scrollbar-width:thin; scrollbar-color:#dfe6ff transparent; }

/* адаптив */
@media (max-width: 900px){
  .ch-layout{ grid-template-columns:1fr; }
  .ch-sidebar{ order:2; }
  .ch-chat{ order:1; min-height:420px; }
}
@media (max-width: 640px){
  .ch-card{ padding:18px; }
  .ch-title{ font-size:22px; }
}
