# API Documentation for Authentication

## Base URL
`http://localhost:3000`

## Endpoints

### 1. Register a User
- **Endpoint**: `POST api/auth/register`
- **Description**: Registers a user with email, password, username, and role (employer or jobseeker). Sends a verification email to confirm the email address. Users must verify their email before logging in.
- **Headers**: 
  - x-fingerprint: <fingerprint> (Required, device fingerprint generated by FingerprintJS or similar)
  - x-forwarded-for: <ip> (Optional, client IP address, defaults to request IP)
- **Request Body**:
  ```json
  {
    "email": "test@example.com",
    "password": "password",
    "username": "test",
    "role": "employer" // or "jobseeker"
  }

- **Response (Success - 200)**:
  ```json
  {
    "message": "Registration is successful. Please confirm your email."
  }
  
- **Response (Error - 400, if email already exists)**:
  ```json
  {
    "statusCode": 400,
    "message": "Email already exists",
    "error": "Bad Request"
  }

- **Response (Error - 403, if country is blocked)**:
  ```json
  {
  "statusCode": 403,
  "message": "Registration is not allowed from your country",
  "error": "Forbidden"
  }

- **Response (Error - 400, if fingerprint is missing)**:
  ```json
  {
    "statusCode": 400,
    "message": "Fingerprint is required",
    "error": "Bad Request"
  }

### 1.1 Verify Email
- **Endpoint**: `GET api/auth/verify-email`
- **Description**: Verifies a user's email address using a token sent via email.
- **Query Parameters:**: `token`: (Required, token from the verification email)
- **Response (Success - 200)**:
  ```json
  {
    "message": "Email successfully confirmed"
  }

- **Response (Error - 400, if token is invalid or expired)**:
  ```json
  {
    "statusCode": 400,
    "message": "Invalid or expired verification token",
    "error": "Bad Request"
  }

- **Response (Error - 400, if email already verified)**:
  ```json
  {
    "statusCode": 400,
    "message": "Email has already been confirmed",
    "error": "Bad Request"
  }

### 2. Login a User
- **Endpoint**: `POST api/auth/login`
- **Description**: Logs in a user with email and password, returns a JWT token. Users must have verified their email before logging in.
- **Request Body**:
  ```json
  {
    "email": "test@example.com",
    "password": "password",
    "rememberMe": false // Optional, extends token expiry to 7 days if true
  }

- **Response (Success - 201)**:
  ```json
  {
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
  
- **Response (Error - 401, if credentials are invalid):**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid credentials",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if email is not verified)**:
  ```json
  {
    "statusCode": 401,
    "message": "Please confirm your email before logging in",
    "error": "Unauthorized"
  }  

- **Response (Error - 401, if user is blocked):**:
  ```json
  {
    "statusCode": 401,
    "message": "User is blocked",
    "error": "Unauthorized"
  }

### 2.1 Forgot Password
- **Endpoint**: `POST api/auth/forgot-password`
- **Description**: Sends a password reset link to the user's email.
- **Request Body**:
  ```json
  {
    "email": "test@example.com"
  }

- **Response (Success - 201)**:
  ```json
  {
    "message": "Password reset link sent"
  }

- **Response (Error - 400, if user not found)**:
  ```json
  {
    "statusCode": 400,
    "message": "User not found",
    "error": "Bad Request"
  }

- **Response (Error - 401, if user is admin or moderator)**:
  ```json
  {
    "statusCode": 401,
    "message": "Password reset is not allowed for admin or moderator roles",
    "error": "Unauthorized"
  }

### 2.2 Reset Password
- **Endpoint**: `POST api/auth/reset-password`
- **Description**: Resets the user's password using a token from the reset email.
- **Request Body**:
  ```json
  {
    "token": "<resetToken>",
    "newPassword": "newpassword123"
  }

- **Response (Success - 201)**:
  ```json
  {
    "message": "Password successfully reset"
  }

- **Response (Error - 400, if token is invalid or expired)**:
  ```json
  {
    "statusCode": 400,
    "message": "Invalid or expired reset token",
    "error": "Bad Request"
  }

- **Response (Error - 401, if user is admin or moderator)**:
  ```json
  {
    "statusCode": 401,
    "message": "Password reset is not allowed for admin or moderator roles",
    "error": "Unauthorized"
  }

### 3. Logout a User
- **Endpoint**: `POST api/auth/logout`
- **Description**: Logs out a user by blacklisting the JWT token in Redis.
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**: None

- **Response (Success - 201)**:
  ```json
  {
    "message": "Logout successful"
  }
  
- **Response (Error - 401, if token is invalid or already blacklisted)**:
  ```json
  {
    "statusCode": 401,
    "message": "Token already invalidated",
    "error": "Unauthorized"
  }    

- **Response (Error - 401, if token is missing or malformed)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 4. Google OAuth - Initiate Authentication
- **Endpoint**: `GET /api/auth/google`
- **Description**: Initiates the Google OAuth authentication process.
- **Query Parameters**: `role` (string, required): The role of the user ("employer" or "jobseeker").
- **Example Request**: `/api/auth/google?role=employer`
- **Response**: Redirects the user to Google's authentication page.

### 5. Google OAuth - Callback (handled by backend)
- **Endpoint**: `GET /api/auth/google/callback`
- **Description**: Handles the callback from Google after authentication. Redirects the user to a callback URL with a token and role for further processing.
- **Query Parameters**: 
  `code`: Authorization code from Google (handled automatically).
  `callbackUrl`: (optional): Custom URL to redirect to after authentication.
- **Response:**: Redirects to the specified callbackUrl or default /auth/callback with query parameters: /auth/callback?token=<jwt-token>&role=<employer|jobseeker>
  `token`: JWT token for user authentication.
  `role`: The role of the user ("employer" or "jobseeker").

- **Error Response (500, if authentication fails)**:
  ```json
  {
    "message": "Authentication failed",
    "error": "<error message>"
  }

### 5.1. Google OAuth - Login
- **Endpoint**: `POST /api/auth/google-login`
- **Description**: Completes the login process for a user authenticated via Google OAuth.
- **Request Body**: 
  ```json
  {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }

- **Response (Success - 200)**:
  ```json
  {
    "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }

- **Response (Error - 401, if token is invalid)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 6. Get Profile
- **Endpoint**: `GET /api/profile/myprofile`
- **Description**: Retrieves the authenticated user's profile based on their role.
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**: None
- **Response (Success - 200)**: 
  //For employer
  ```json
  {
    "id": "<userId>",
    "role": "employer",
    "email": "test@example.com",
    "username": "test",
    "company_name": "Test Company",
    "company_info": "A great company",
    "referral_link": "https://example.com/ref/test",
    "timezone": "Europe/Moscow",
    "currency": "USD",
    "average_rating": 4.5,
    "avatar": "https://example.com/avatar.jpg",
    "identity_verified": true,
    "reviews": [
      {
        "id": "<reviewId>",
        "reviewer_id": "<userId>",
        "reviewed_id": "<userId>",
        "job_application_id": "<jobApplicationId>",
        "rating": 4,
        "comment": "Great work, very professional!",
        "created_at": "2025-05-13T18:00:00.000Z",
        "updated_at": "2025-05-13T18:00:00.000Z"
      }
    ]
  }
  //For jobseeker
  ```json
  {
    "id": "<userId>",
    "role": "jobseeker",
    "email": "test@example.com",
    "username": "test",
    "skills": [
      {
        "id": "<skillId>",
        "name": "Web Development",
        "parent_id": "<parentSkillId>",
        "created_at": "2025-05-22T18:00:00.000Z",
        "updated_at": "2025-05-22T18:00:00.000Z"
      }
    ],
    "experience": "2 years",
    "description": "Experienced web developer specializing in React and Node.js",
    "portfolio": "https://portfolio.com",
    "video_intro": "https://video.com",
    "timezone": "Europe/Moscow",
    "currency": "USD",
    "average_rating": 4.0,
    "profile_views": 10,
    "avatar": "https://example.com/avatar.jpg",
    "identity_verified": false,
    "reviews": [
      {
        "id": "<reviewId>",
        "reviewer_id": "<userId>",
        "reviewed_id": "<userId>",
        "job_application_id": "<jobApplicationId>",
        "rating": 4,
        "comment": "Great work, very professional!",
        "created_at": "2025-05-22T18:00:00.000Z",
        "updated_at": "2025-05-22T18:00:00.000Z"
      }
    ]
  }
- **Response (Error - 401, if token is invalid or missing)**: 
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if user or profile not found)**: 
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

### 6.1. Get Profile by ID
- **Endpoint**: `GET /api/profile/:id`
- **Description**: Retrieves the profile of a specific user (jobseeker or employer) by their ID. Accessible to both authenticated and unauthenticated users. For unauthenticated users, sensitive information like email is omitted. For jobseeker profiles, the view count is incremented.
- **Headers**: `Authorization: Bearer <token>` (Optional)
- **Request Parameters**: `id`: The ID of the user.
- **Response (Success - 200)**: 
  // For employer (unauthenticated)
  ```json
  {
    "id": "<userId>",
    "role": "employer",
    "username": "test",
    "company_name": "Test Company",
    "company_info": "A great company",
    "referral_link": "https://example.com/ref/test",
    "timezone": "Europe/Moscow",
    "currency": "USD",
    "average_rating": 4.5,
    "avatar": "https://example.com/avatar.jpg",
    "identity_verified": true,
    "reviews": [
      {
        "id": "<reviewId>",
        "reviewer_id": "<userId>",
        "reviewed_id": "<userId>",
        "job_application_id": "<jobApplicationId>",
        "rating": 4,
        "comment": "Great work, very professional!",
        "created_at": "2025-05-13T18:00:00.000Z",
        "updated_at": "2025-05-13T18:00:00.000Z"
      }
    ]
  }
  // For jobseeker (authenticated)
  ```json
  {
    "id": "<userId>",
    "role": "jobseeker",
    "email": "test@example.com",
    "username": "test",
    "skills": [
      {
        "id": "<skillId>",
        "name": "Web Development",
        "parent_id": "<parentSkillId>",
        "created_at": "2025-05-22T18:00:00.000Z",
        "updated_at": "2025-05-22T18:00:00.000Z"
      }
    ],
    "experience": "2 years",
    "description": "Experienced web developer specializing in React and Node.js",
    "portfolio": "https://portfolio.com",
    "video_intro": "https://video.com",
    "timezone": "Europe/Moscow",
    "currency": "USD",
    "average_rating": 4.0,
    "profile_views": 10,
    "avatar": "https://example.com/avatar.jpg",
    "identity_verified": false,
    "reviews": [
      {
        "id": "<reviewId>",
        "reviewer_id": "<userId>",
        "reviewed_id": "<userId>",
        "job_application_id": "<jobApplicationId>",
        "rating": 4,
        "comment": "Great work, very professional!",
        "created_at": "2025-05-22T18:00:00.000Z",
        "updated_at": "2025-05-22T18:00:00.000Z"
      }
    ]
  }

- **Response (Error - 404, if user or profile not found)**: 
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

- **Response (Error - 401, if user role is not supported)**: 
  ```json
  {
    "statusCode": 401,
    "message": "User role not supported",
    "error": "Unauthorized"
  }

### 7. Update Profile
- **Endpoint**: `PUT /api/profile`
- **Description**: Updates the authenticated user's profile based on their role.
- **Headers**: `Authorization: Bearer <token>` 
- **Request Body**:
  //For employer
  ```json
  {
    "role": "employer",
    "company_name": "Updated Company",
    "company_info": "Updated info",
    "referral_link": "https://example.com/ref/updated",
    "timezone": "America/New_York",
    "currency": "EUR"
  }
  //For jobseeker
  ```json
  {
    "role": "jobseeker",
    "skillIds": ["<skillId1>", "<skillId2>"],
    "experience": "3 years",
    "description": "Experienced web developer specializing in React and Node.js",
    "portfolio": "https://newportfolio.com",
    "video_intro": "https://newvideo.com",
    "timezone": "America/New_York",
    "currency": "EUR"
  }

- **Response (Success - 200): Returns the updated profile (same format as GET /api/profile)**

- **Response (Error - 401, if token is invalid or missing)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if user or profile not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

- **Response (Error - 401, if role mismatch)**:
  ```json
  {
    "statusCode": 401,
    "message": "User role mismatch",
    "error": "Unauthorized"
  }

### 8. Create Job Post
- **Endpoint**: `POST /api/job-posts`
- **Description**: Creates a new job post for an authenticated employer. The `applicationLimit` defaults to 100 if not specified.
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**:
  ```json
  {
    "title": "Software Engineer",
    "description": "We are looking for a skilled software engineer...",
    "location": "Remote",
    "salary": 50000,
    "status": "Active",
    "category_id": "<categoryId>", // Optional
    "job_type": "Full-time", // Optional: "Full-time", "Part-time", "Project-based"
  }

- **Response (Success - 200)**:
  ```json
  {
    "id": "<jobPostId>",
    "title": "Software Engineer",
    "description": "We are looking for a skilled software engineer...",
    "location": "Remote",
    "salary": 50000,
    "status": "Active",
    "category_id": "<categoryId>",
    "job_type": "Full-time",
    "employer_id": "<userId>",
    "applicationLimit": 100,
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:00:00.000Z"
  }

- **Response (Error - 401, if token is invalid or missing)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if user is not an employer)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only employers can create job posts",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if user not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

### 9. Update Job Post
- **Endpoint**: `PUT /api/job-posts/:id`
- **Description**: Updates an existing job post for an authenticated employer.
- **Headers**: `Authorization: Bearer <token>`
- **Request Body:**:
  ```json
  {
    "title": "Senior Software Engineer",
    "description": "Updated description...",
    "location": "Remote",
    "salary": 60000,
    "status": "Closed",
    "category_id": "<categoryId>", // Optional
    "job_type": "Full-time" // Optional: "Full-time", "Part-time", "Project-based"
  }

- **Response (Success - 200)**:
  ```json
  {
    "id": "<jobPostId>",
    "title": "Senior Software Engineer",
    "description": "Updated description...",
    "location": "Remote",
    "salary": 60000,
    "status": "Closed",
    "category_id": "<categoryId>",
    "job_type": "Full-time",
    "employer_id": "<userId>",
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:30:00.000Z"
  }

- **Response (Error - 401, if token is invalid or missing)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if job post not found or user does not have permission)**:
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found or you do not have permission to update it",
    "error": "Not Found"
  }

### 10. Get Job Post
- **Endpoint**: `GET /api/job-posts/:id`
- **Description**: Retrieves a specific job post by ID.
- **Request Parameters**: `id`: The ID of the job post.

- **Response (Success - 200)**:
  ```json
  {
    "id": "<jobPostId>",
    "title": "Senior Software Engineer",
    "description": "Updated description...",
    "location": "Remote",
    "salary": 60000,
    "status": "Closed",
    "category_id": "<categoryId>",
    "category": {
      "id": "<categoryId>",
      "name": "Software Development",
      "created_at": "2025-05-13T18:00:00.000Z",
      "updated_at": "2025-05-13T18:00:00.000Z"
    },
    "job_type": "Full-time",
    "employer_id": "<userId>",
    "employer": {
      "id": "<userId>",
      "email": "test15@example.com",
      "username": "test15",
      "role": "employer"
    },
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:30:00.000Z"
  }

- **Response (Error - 404, if job post not found)**:  
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found",
    "error": "Not Found"
  }

### 11. Get Job Posts by Employer
- **Endpoint**: `GET /api/job-posts/my-posts`
- **Description**: Retrieves all job posts created by the authenticated employer.
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**:  
  ```json
  [
    {
      "id": "<jobPostId>",
      "title": "Senior Software Engineer",
      "description": "Updated description...",
      "location": "Remote",
      "salary": 60000,
      "status": "Closed",
      "category_id": "<categoryId>",
      "category": {
        "id": "<categoryId>",
        "name": "Software Development",
        "created_at": "2025-05-13T18:00:00.000Z",
        "updated_at": "2025-05-13T18:00:00.000Z"
      },
      "job_type": "Full-time",
      "employer_id": "<userId>",
      "employer": {
        "id": "<userId>",
        "email": "test15@example.com",
        "username": "test15",
        "role": "employer"
      },
      "created_at": "2025-05-13T18:00:00.000Z",
      "updated_at": "2025-05-13T18:30:00.000Z"
    }
  ]

- **Response (Error - 401, if token is invalid or missing)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if user is not an employer)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only employers can view their job posts",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if user not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

### 12. Create Category (Admin)
- **Endpoint**: `POST /api/admin/categories`
- **Description**: Creates a new category or subcategory for job posts and jobseeker skills (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**:
  ```json
  {
    "name": "Software Development",
    "parentId": "<parentCategoryId>" // Optional, for subcategories
  }
- **Response (Success - 200)**:
  ```json
  {
    "id": "<categoryId>",
    "name": "Software Development",
    "parent_id": "<parentCategoryId>",
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:00:00.000Z"
  }
- **Response (Error - 400, if category already exists)**:
  ```json
  {
    "statusCode": 400,
    "message": "Category with this name already exists",
    "error": "Bad Request"
  }
- **Response (Error - 400, if parent category not found)**:
  ```json
  {
    "statusCode": 400,
    "message": "Parent category not found",
    "error": "Bad Request"
  }
- **Response (Error - 400, if name is missing)**:
  ```json
  {
    "statusCode": 400,
    "message": "Category name is required",
    "error": "Bad Request"
  }
- **Response (Error - 401, if token is invalid or user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  } 

### 13. Get Categories (Admin)
- **Endpoint**: `GET /api/admin/categories`
- **Description**: Retrieves all categories in a hierarchical tree structure (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**:
  ```json
  [
    {
      "id": "<categoryId>",
      "name": "Office and Admin",
      "parent_id": null,
      "created_at": "2025-05-13T18:00:00.000Z",
      "updated_at": "2025-05-13T18:00:00.000Z",
      "subcategories": [
        {
          "id": "<subcategoryId>",
          "name": "Virtual Assistant",
          "parent_id": "<categoryId>",
          "created_at": "2025-05-13T18:00:00.000Z",
          "updated_at": "2025-05-13T18:00:00.000Z",
          "subcategories": []
        }
      ]
    },
    {
      "id": "<categoryId>",
      "name": "Writing",
      "parent_id": null,
      "created_at": "2025-05-13T18:00:00.000Z",
      "updated_at": "2025-05-13T18:00:00.000Z",
      "subcategories": [
        {
          "id": "<subcategoryId>",
          "name": "Content Writers",
          "parent_id": "<categoryId>",
          "created_at": "2025-05-13T18:00:00.000Z",
          "updated_at": "2025-05-13T18:00:00.000Z",
          "subcategories": []
        }
      ]
    }
  ]
- **Response (Error - 401, if token is invalid or user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 13.1. Search Categories (Admin)
- **Endpoint**: `GET /api/admin/categories/search`
- **Description**: Searches categories by name (partial match, case-insensitive, admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**: `term` (string, required): Search term for category names.
- **Example Request**: `/api/admin/categories/search?term=Web`
- **Response (Success - 200)**:
  ```json
  [
    {
      "id": "<categoryId>",
      "name": "Web Development",
      "parent_id": "<parentCategoryId>",
      "created_at": "2025-05-13T18:00:00.000Z",
      "updated_at": "2025-05-13T18:00:00.000Z"
    }
  ]
- **Response (Error - 400, if search term is missing)**:
    ```json
  {
    "statusCode": 400,
    "message": "Search term is required",
    "error": "Bad Request"
  }
- **Response (Error - 401, if token is invalid or user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 14. Apply to Job Post
- **Endpoint**: `POST /api/job-applications`
- **Description**: Allows a jobseeker to apply to a job post. Applications are limited per job post (default: 100) and distributed cumulatively over 4 days (60%, 80%, 90%, 100%). If the daily limit is reached, a "Daily application limit reached" error is returned. If the total limit is reached, a "Job full" error is returned.
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**:
  ```json
  {
    "job_post_id": "<jobPostId>"
  }

- **Response (Success - 200)**:
  ```json
  {
    "id": "<applicationId>",
    "job_post_id": "<jobPostId>",
    "job_seeker_id": "<userId>",
    "status": "Pending",
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:00:00.000Z"
  }

- **Response (Error - 400, if daily limit reached)**:
  ```json
  {
    "statusCode": 400,
    "message": "Daily application limit reached",
    "error": "Bad Request"
  }

- **Response (Error - 401, if token is invalid or missing)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if user is not a jobseeker)**:  
  ```json
  {
    "statusCode": 401,
    "message": "Only jobseekers can apply to job posts",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if job post not found)**: 
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found",
    "error": "Not Found"
  }

- **Response (Error - 400, if job post is not active)**: 
  ```json
  {
    "statusCode": 400,
    "message": "Cannot apply to a job post that is not active",
    "error": "Bad Request"
  }

- **Response (Error - 400, if user already applied)**: 
  ```json
  {
    "statusCode": 400,
    "message": "You have already applied to this job post",
    "error": "Bad Request"
  }

- **Response (Error - 400, if application limit reached)**: 
  ```json
  {
    "statusCode": 400,
    "message": "Job full",
    "error": "Bad Request"
  }

- **Response (Error - 400, if application period ended)**: 
  ```json
  {
    "statusCode": 400,
    "message": "Application period has ended",
    "error": "Bad Request"
  }

### 15. Close Job Post
- **Endpoint**: `POST /api/job-posts/:id/close`
- **Description**: Closes a job post (sets status to "Closed"). Only the employer who created the job can close it.
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the job post.
- **Response (Success - 200)**: 
  ```json
  {
    "id": "<jobPostId>",
    "title": "Software Engineer",
    "description": "We are looking for a skilled software engineer...",
    "location": "Remote",
    "salary": 50000,
    "status": "Closed",
    "category_id": "<categoryId>",
    "job_type": "Full-time",
    "employer_id": "<userId>",
    "applicationLimit": 100,
    "created_at": "2025-05-15T05:13:00.000Z",
    "updated_at": "2025-05-15T05:13:00.000Z"
  }

- **Response (Error - 404, if job post not found)**: 
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found or you do not have permission to close it",
    "error": "Not Found"
  }

- **Response (Error - 400, if already closed)**: 
  ```json
  {
    "statusCode": 400,
    "message": "Job post is already closed",
    "error": "Bad Request"
  }

### 16. Get My Applications (Jobseeker)
- **Endpoint**: `GET /api/job-applications/my-applications`
- **Description**: Retrieves all applications submitted by the authenticated jobseeker.
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**: 
  ```json
  [
  {
    "id": "<applicationId>",
    "job_post_id": "<jobPostId>",
    "job_seeker_id": "<userId>",
    "status": "Pending",
    "job_post": {
      "id": "<jobPostId>",
      "title": "Software Engineer",
      "description": "We are looking for a skilled software engineer...",
      "location": "Remote",
      "salary": 50000,
      "status": "Active",
      "category_id": "<categoryId>",
      "employer_id": "<employerId>",
      "created_at": "2025-05-13T18:00:00.000Z",
      "updated_at": "2025-05-13T18:00:00.000Z"
    },
    "job_seeker": {
      "id": "<userId>",
      "email": "jobseeker1@example.com",
      "username": "jobseeker1",
      "role": "jobseeker"
    },
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:00:00.000Z"
  }
  ]

- **Response (Error - 401, if token is invalid or missing)**: 
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if user is not a jobseeker)**: 
  ```json
  {
    "statusCode": 401,
    "message": "Only jobseekers can view their applications",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if user not found)**:   
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

### 17. Get Applications for Job Post (Employer)
- **Endpoint**: `GET /api/job-applications/job-post/:id`
- **Description**: Retrieves all applications for a specific job post, accessible only to the employer who created the job post.
- **Headers**: `Authorization: Bearer <token>`
- **Path Parameters**: 
  - `id` (string, required): The ID of the job post.
- **Response (Success - 200)**:  
  ```json
  [
    {
      "userId": "<jobseekerId>",
      "username": "john_doe107",
      "email": "jobseeker107@example.com",
      "jobDescription": "Experienced web developer with 5 years in React.",
      "appliedAt": "2025-05-15T06:12:00.000Z"
    }
  ]

- **Response (Error - 401, if token is invalid or missing)**:  
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if user is not the employer of this job post)**:   
  ```json
  {
    "statusCode": 401,
    "message": "Only employers can view applications for their job posts",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if job post not found or user does not have permission)**:   
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found or you do not have permission to view its applications",
    "error": "Not Found"
  }

### 18. Update Application Status (Employer)
- **Endpoint**: `PUT /api/job-applications/:id`
- **Description**: Updates the status of a job application, accessible only to the employer who created the job post.
- **Headers**: `Authorization: Bearer <token>`  
- **Request Parameters**: `id`: The ID of the job application
- **Note**: Only one application can be set to "Accepted" per job post. When an application is accepted, the job post is automatically closed (status set to "Closed").
- **Request Body**:   
  ```json
  {
    "status": "Accepted" // or "Rejected"
  }
- **Response (Success - 200)**: 
  ```json
  {
    "id": "<applicationId>",
    "job_post_id": "<jobPostId>",
    "job_seeker_id": "<userId>",
    "status": "Accepted",
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:30:00.000Z"
  }

- **Response (Success - 400)**: 
  ```json
  {
    "statusCode": 400,
    "message": "Only one application can be accepted per job post",
    "error": "Bad Request"
  }    

- **Response (Error - 401, if token is invalid or missing)**:   
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if user is not an employer)**:     
  ```json
  {
    "statusCode": 401,
    "message": "Only employers can update application status",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if user does not have permission)**:
  ```json
  {
    "statusCode": 401,
    "message": "You do not have permission to update this application",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if user does not have permission)**:
  ```json
  {
    "statusCode": 404,
    "message": "Application not found",
    "error": "Not Found"
  }

### 19. Get All Job Posts
- **Endpoint**: `GET /api/job-posts`
- **Description**: Retrieves all active and approved job posts with optional filters, pagination, and sorting.
- **Query Parameters**:
  - `title` (string, optional): Filter by job title (partial match).
  - `location` (string, optional): Filter by location (partial match).
  - `job_type` (string, optional): Filter by job type ("Full-time", "Part-time", "Project-based").
  - `salary_min` (number, optional): Filter by minimum salary.
  - `salary_max` (number, optional): Filter by maximum salary.
  - `category_id` (string, optional): Filter by category ID.
  - `required_skills` (string or string[], optional): Filter by required skills (e.g., "required_skills=JavaScript" or "required_skills[]=JavaScript&required_skills[]=Python").
  - `page` (number, optional): Page number for pagination (default: 1).
  - `limit` (number, optional): Number of items per page (default: 10).
  - `sort_by` (string, optional): Field to sort by ("created_at" or "salary", default: "created_at").
  - `sort_order` (string, optional): Sort order ("ASC" or "DESC", default: "DESC").
- **Example Request**: `/api/job-posts/search?title=Engineer&location=Remote&salaryMin=40000&salaryMax=60000&job_type=Full-time&category_id=<categoryId>`
- **Response (Success - 200)**:
  ```json
  {
    "total": 50,
    "data": [
      {
        "id": "<jobPostId>",
        "title": "Software Engineer",
        "description": "We are looking for a skilled engineer...",
        "location": "Remote",
        "salary": 50000,
        "status": "Active",
        "pending_review": false,
        "category_id": "<categoryId>",
        "category": {
          "id": "<categoryId>",
          "name": "Engineering",
          "created_at": "2025-05-22T10:00:00.000Z",
          "updated_at": "2025-05-22T10:00:00.000Z"
        },
        "job_type": "Full-time",
        "employer_id": "<employerId>",
        "employer": {
          "user_id": "<employerId>",
          "company_name": "Tech Corp",
          "company_info": "A tech company",
          "referral_link": null,
          "timezone": "UTC",
          "currency": "USD",
          "average_rating": 0,
          "created_at": "2025-05-22T10:00:00.000Z",
          "updated_at": "2025-05-22T10:00:00.000Z"
        },
        "applicationLimit": 100,
        "views": 0,
        "required_skills": ["JavaScript", "TypeScript"],
        "created_at": "2025-05-22T10:00:00.000Z",
        "updated_at": "2025-05-22T10:00:00.000Z"
      }
    ]
  }

### 20. Create Review
- **Endpoint**: `POST /api/reviews`
- **Description**: Creates a review for a user (employer or jobseeker) related to a specific job application.
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**:
  ```json
  {
    "job_application_id": "<jobApplicationId>",
    "rating": 4,
    "comment": "Great work, very professional!"
  }

- **Response (Success - 200)**:
  ```json
  {
    "id": "<reviewId>",
    "reviewer_id": "<userId>",
    "reviewed_id": "<userId>",
    "job_application_id": "<jobApplicationId>",
    "rating": 4,
    "comment": "Great work, very professional!",
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:00:00.000Z"
  }

- **Response (Error - 401, if token is invalid or missing)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if user does not have permission)**:
  ```json
  {
    "statusCode": 401,
    "message": "You can only leave reviews for your own job applications",
    "error": "Unauthorized"
  }

- **Response (Error - 400, if job application is not accepted)**:
  ```json
  {
    "statusCode": 400,
    "message": "Reviews can only be left for accepted job applications",
    "error": "Bad Request"
  }

- **Response (Error - 400, if rating is invalid)**:
  ```json
  {
    "statusCode": 400,
    "message": "Rating must be between 1 and 5",
    "error": "Bad Request"
  }

- **Response (Error - 400, if review already exists)**:
  ```json
  {
    "statusCode": 400,
    "message": "You have already left a review for this job application",
    "error": "Bad Request"
  }

- **Response (Error - 404, if job application not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "Job application not found",
    "error": "Not Found"
  }

### 21. Get Reviews for User
- **Endpoint**: `GET /api/reviews/user/:id`
- **Description**: Retrieves all reviews for a specific user (employer or jobseeker).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the user
- **Response (Success - 200)**:
  ```json
  [
  {
    "id": "<reviewId>",
    "reviewer_id": "<userId>",
    "reviewed_id": "<userId>",
    "job_application_id": "<jobApplicationId>",
    "rating": 4,
    "comment": "Great work, very professional!",
    "reviewer": {
      "id": "<userId>",
      "email": "employer4@example.com",
      "username": "employer4",
      "role": "employer"
    },
    "job_application": {
      "id": "<jobApplicationId>",
      "job_post_id": "<jobPostId>",
      "job_seeker_id": "<userId>",
      "status": "Accepted"
    },
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:00:00.000Z"
  }
  ]

- **Response (Error - 404, if user not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

### 22. Get All Users (Admin)
- **Endpoint**: `GET /api/admin/users`
- **Description**: Retrieves all users (admin only) with optional filters.
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**:
  - `username` (string, optional): Filter by username (partial match, case-insensitive).
  - `email` (string, optional): Filter by email (partial match, case-insensitive).
  - `createdAfter` (string, optional): Filter users created after this date (format: `YYYY-MM-DD`).
- **Example Request**: `/api/admin/users?username=john&email=example.com&createdAfter=2025-05-01`

- **Response (Success - 200)**: 
  ```json
  [
    {
      "id": "<userId>",
      "email": "john@example.com",
      "username": "john_doe",
      "role": "jobseeker",
      "provider": null,
      "created_at": "2025-05-15T05:13:00.000Z",
      "updated_at": "2025-05-15T05:13:00.000Z"
    }
  ]

- **Response (Error - 401, if token is invalid or missing)**: 
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if user is not an admin)**: 
  ```json
  {
    "statusCode": 401,
    "message": "Only admins can access this resource",
    "error": "Unauthorized"
  }

### 23. Get User by ID (Admin)
- **Endpoint**: `GET /api/admin/users/:id`
- **Description**: Retrieves a specific user by ID (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the user.
- **Response (Success - 200)**: 
  ```json
  {
    "id": "<userId>",
    "email": "test@example.com",
    "username": "test",
    "role": "employer",
    "provider": null,
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:00:00.000Z"
  }

- **Response (Error - 404, if user not found)**: 
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

### 24. Update User (Admin)
- **Endpoint**: `PUT /api/admin/users/:id`
- **Description**: Updates a specific user (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the user.
- **Request Body**: 
  ```json
  {
    "email": "updated@example.com",
    "username": "updatedUser",
    "role": "jobseeker"
  }

- **Response (Success - 200)**: 
  ```json
  {
    "id": "<userId>",
    "email": "updated@example.com",
    "username": "updatedUser",
    "role": "jobseeker",
    "provider": null,
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:30:00.000Z"
  }

- **Response (Error - 404, if user not found)**: 
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

### 25. Delete User (Admin)
- **Endpoint**: `DELETE /api/admin/users/:id`
- **Description**: Deletes a specific user (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the user.
- **Response (Success - 200)**: 
  ```json
  {
    "message": "User deleted successfully"
  }

- **Response (Error - 404, if user not found)**: 
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

### 26. Reset User Password (Admin)
- **Endpoint**: `POST /api/admin/users/:id/reset-password`
- **Description**: Resets the password for a specific user (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the user.
- **Request Body**: 
  ```json
  {
    "newPassword": "newpassword123"
  }

- **Response (Success - 200)**:
  ```json
  {
    "message": "Password reset successful"
  }

- **Response (Error - 404, if user not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

- **Response (Error - 401, if token is invalid or user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 27. Get All Job Posts (Admin)
- **Endpoint**: `GET /api/admin/job-posts`
- **Description**: Retrieves all job posts (admin only) with optional filters, pagination, and sorting. Supports filtering by status, pending review status, and job title (partial match). Returns total count and paginated data for frontend pagination
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**: 
  - `status` (string, optional): Filter by status ("Active", "Draft", "Closed").
  - `pendingReview` (string, optional): Filter by pending review status ("true" or "false").
  - `title` (string, optional): Filter by job title (partial match, case-insensitive).
  - `page` (number, optional): Page number for pagination (default: 1).
  - `limit` (number, optional): Number of items per page (default: 10).
- **Example Request**: `/api/admin/job-posts?status=Active&pendingReview=false&title=Software&page=1&limit=10`
- **Response (Success - 200)**: 
  ```json
  {
    "total": 50,
    "data": [
      {
        "id": "<jobPostId>",
        "title": "Software Engineer",
        "description": "We are looking for a skilled software engineer...",
        "location": "Remote",
        "salary": 50000,
        "status": "Active",
        "pending_review": false,
        "category_id": "<categoryId>",
        "category": {
          "id": "<categoryId>",
          "name": "Software Development",
          "created_at": "2025-05-15T06:12:00.000Z",
          "updated_at": "2025-05-15T06:12:00.000Z"
        },
        "job_type": "Full-time",
        "employer_id": "<employerId>",
        "employer": {
          "id": "<employerId>",
          "email": "employer100@example.com",
          "username": "jane_smith100",
          "role": "employer"
        },
        "applicationLimit": 100,
        "created_at": "2025-05-15T06:12:00.000Z",
        "updated_at": "2025-05-15T06:12:00.000Z"
      }
    ]
  }

- **Response (Error - 400, pagination parametrs incorrect)**:
  ```json
  {
    "statusCode": 400,
    "message": "Page must be a positive integer",
    "error": "Bad Request"
  }

- **Response (Error - 401, if token is invalid or user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 28. Update Job Post (Admin)
- **Endpoint**: `PUT /api/admin/job-posts/:id`
- **Description**: Updates a specific job post (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the job post.
- **Request Body**:
  ```json
  {
    "title": "Senior Software Engineer",
    "description": "Updated description...",
    "location": "Remote",
    "salary": 60000,
    "status": "Closed",
    "job_type": "Full-time",
    "category_id": "<categoryId>",
    "applicationLimit": 50
  }

- **Response (Success - 200)**: 
  ```json
  {
    "id": "<jobPostId>",
    "title": "Senior Software Engineer",
    "description": "Updated description...",
    "location": "Remote",
    "salary": 60000,
    "status": "Closed",
    "category_id": "<categoryId>",
    "job_type": "Full-time",
    "employer_id": "<userId>",
    "applicationLimit": 50,
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:30:00.000Z"
  }

### 29. Delete Job Post (Admin)
- **Endpoint**: `DELETE /api/admin/job-posts/:id`
- **Description**: Deletes a specific job post (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the job post.
- **Response (Success - 200)**: 
  ```json
  {
    "message": "Job post deleted successfully"
  }

- **Response (Error - 404, if job post not found)**: 
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found",
    "error": "Not Found"
  }

### 30. Approve Job Post (Admin)
- **Endpoint**: `POST /api/admin/job-posts/:id/approve`
- **Description**: Approves a job post by setting pending_review to false (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the job post.
- **Response (Success - 200)**: 
  ```json
  {
    "id": "<jobPostId>",
    "title": "Software Engineer",
    "description": "We are looking for a skilled software engineer...",
    "location": "Remote",
    "salary": 50000,
    "status": "Active",
    "pending_review": false,
    "category_id": "<categoryId>",
    "job_type": "Full-time",
    "employer_id": "<employerId>",
    "applicationLimit": 100,
    "created_at": "2025-05-15T06:12:00.000Z",
    "updated_at": "2025-05-15T06:12:00.000Z"
  }

- **Response (Error - 404, if job post not found)**: 
  ```json  
  {
    "statusCode": 404,
    "message": "Job post not found",
    "error": "Not Found"
  }

### 31. Flag Job Post for Review (Admin)
- **Endpoint**: `POST /api/admin/job-posts/:id/flag`
- **Description**: Flags a job post for review by setting pending_review to true (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the job post.
- **Response (Success - 200)**: 
  ```json
  {
    "id": "<jobPostId>",
    "title": "Software Engineer",
    "description": "We are looking for a skilled software engineer...",
    "location": "Remote",
    "salary": 50000,
    "status": "Active",
    "pending_review": true,
    "category_id": "<categoryId>",
    "job_type": "Full-time",
    "employer_id": "<employerId>",
    "applicationLimit": 100,
    "created_at": "2025-05-15T06:12:00.000Z",
    "updated_at": "2025-05-15T06:12:00.000Z"
  }

- **Response (Error - 404, if job post not found)**: 
  ```json  
  {
    "statusCode": 404,
    "message": "Job post not found",
    "error": "Not Found"
  }

- **Response (Error - 401, if unauthorized)**: 
  ```json  
  {
    "statusCode": 401,
    "message": "Only admins can access this resource",
    "error": "Unauthorized"
  }

### 32. Get All Reviews (Admin)
- **Endpoint**: `GET /api/admin/reviews`
- **Description**: Retrieves all reviews (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**: 
  ```json
  [
  {
    "id": "<reviewId>",
    "reviewer_id": "<userId>",
    "reviewed_id": "<userId>",
    "job_application_id": "<jobApplicationId>",
    "rating": 4,
    "comment": "Great work, very professional!",
    "reviewer": {
      "id": "<userId>",
      "email": "employer4@example.com",
      "username": "employer4",
      "role": "employer"
    },
    "reviewed": {
      "id": "<userId>",
      "email": "jobseeker1@example.com",
      "username": "jobseeker1",
      "role": "jobseeker"
    },
    "job_application": {
      "id": "<jobApplicationId>",
      "job_post_id": "<jobPostId>",
      "job_seeker_id": "<userId>",
      "status": "Accepted"
    },
    "created_at": "2025-05-13T18:00:00.000Z",
    "updated_at": "2025-05-13T18:00:00.000Z"
  }
  ]

### 33. Delete Review (Admin)
- **Endpoint**: `DELETE /api/admin/reviews/:id`
- **Description**: Deletes a specific review (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the review.
- **Response (Success - 200)**: 
  ```json
  {
    "message": "Review deleted successfully"
  }

- **Response (Error - 404, if review not found)**: 
  ```json
  {
    "statusCode": 404,
    "message": "Review not found",
    "error": "Not Found"
  }

### 34. Get Analytics (Admin)
- **Endpoint**: `GET /api/admin/analytics`
- **Description**: Retrieves analytics data (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**: 
  ```json
  {
    "totalUsers": 50,
    "employers": 20,
    "jobSeekers": 30,
    "totalJobPosts": 40,
    "activeJobPosts": 25,
    "totalApplications": 100,
    "totalReviews": 15
  }

### 35. Get Registration Stats (Admin)
- **Endpoint**: `GET /api/admin/analytics/registrations`
- **Description**: Retrieves registration statistics over a specified period (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**: 
  - `startDate` (string, required): Start date in format `YYYY-MM-DD`.
  - `endDate` (string, required): End date in format `YYYY-MM-DD`.
  - `interval` (string, required): Interval for grouping ("day", "week", "month").
- **Example Request**: `/api/admin/analytics/registrations?startDate=2025-05-01&endDate=2025-05-15&interval=day`
- **Response (Success - 200)**: 
  ```json
    [
      {
        "period": "2025-05-01T00:00:00.000Z",
        "count": 5
      },
      {
        "period": "2025-05-02T00:00:00.000Z",
        "count": 3
      }
    ]

- **Response (Error - 400, if invalid dates)**:  
  ```json
  {
    "statusCode": 400,
    "message": "Invalid date format",
    "error": "Bad Request"
  }

### 36. Get Geographic Distribution (Admin)
- **Endpoint**: `GET /api/admin/analytics/geographic-distribution`
- **Description**: Retrieves the geographic distribution of users, optionally filtered by role and registration date range (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**: 
  - `startDate` (string, optional): Filter users registered on or after this date (format: `YYYY-MM-DD`). If not provided, no lower bound is applied.
  - `endDate` (string, optional): Filter users registered on or before this date (format: `YYYY-MM-DD`). If not provided, no upper bound is applied.
  - `role` (string, optional): Filter by user role (`jobseeker`, `employer`, or `all`). Defaults to `all`.
- **Example Request**: `/api/admin/analytics/geographic-distribution?startDate=2025-07-01&endDate=2025-07-31&role=jobseeker`
- **Response (Success - 200)**:
  ```json
  [
    {
      "country": "US",
      "count": 50
    },
    {
      "country": "CA",
      "count": 20
    }
  ]
- **Response (Error - 401, if token is invalid or user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }
- **Response (Error - 400, if date format is invalid)**:
  ```json
  {
    "statusCode": 400,
    "message": "Invalid date format",
    "error": "Bad Request"
  }

### 35. Set Global Application Limit for All Job Posts (Admin)
- **Endpoint**: `POST /api/admin/settings/job-posts-application-limit`
- **Description**: Sets the global application limit for all job posts (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**:
  ```json
  {
    "limit": 50
  }
- **Response (Success - 200)**: 
  ```json
  {
    "message": "Application limit updated successfully",
    "limit": 50
  }

- **Response (Error - 400, if limit exceeds global limit)**: 
  ```json
  {
    "statusCode": 400,
    "message": "Application limit cannot exceed global limit of 1000",
    "error": "Bad Request"
  }

- **Response (Error - 404, if job post not found)**: 
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found",
    "error": "Not Found"
  }

### 36. Submit Feedback
- **Endpoint**: `POST /api/feedback`
- **Description**: Submits feedback from a jobseeker or employer.
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**:
  ```json
  {
    "message": "This is my feedback about the platform."
  }

- **Response (Success - 200)**: 
  ```json
  {
    "id": "<feedbackId>",
    "user_id": "<userId>",
    "message": "This is my feedback about the platform.",
    "role": "jobseeker",
    "created_at": "2025-05-15T05:13:00.000Z",
    "updated_at": "2025-05-15T05:13:00.000Z"
  }

- **Response (Error - 401, if user is not a jobseeker or employer)**: 
  ```json
  {
    "statusCode": 401,
    "message": "Only jobseekers and employers can submit feedback",
    "error": "Unauthorized"
  }

### 37. Get Feedback (Admin)
- **Endpoint**: `GET /api/feedback`
- **Description**: Retrieves all feedback submissions (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**: 
  ```json
  [
  {
    "id": "<feedbackId>",
    "user_id": "<userId>",
    "message": "This is my feedback about the platform.",
    "role": "jobseeker",
    "user": {
      "id": "<userId>",
      "email": "jobseeker100@example.com",
      "username": "john_doe100",
      "role": "jobseeker"
    },
    "created_at": "2025-05-15T05:13:00.000Z",
    "updated_at": "2025-05-15T05:13:00.000Z"
  }
  ]

- **Response (Error - 401, if user is not an admin)**:   
  ```json
  {
  "statusCode": 401,
  "message": "Only admins can view feedback",
  "error": "Unauthorized"
  }

### 38. Add Blocked Country (Admin)
- **Endpoint**: `POST /api/admin/blocked-countries`
- **Description**: Adds a country to the blocked list (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**: 
  ```json
  {
    "countryCode": "IN"
  }
- **Response (Success - 201)**:
  ```json
  {
    "id": "<blockedCountryId>",
    "country_code": "IN",
    "created_at": "2025-05-15T06:12:00.000Z",
    "updated_at": "2025-05-15T06:12:00.000Z"
  }

- **Response (Error - 400, if country is already blocked)**:
  ```json
  {
    "statusCode": 400,
    "message": "Country is already blocked",
    "error": "Bad Request"
  }

### 39. Remove Blocked Country (Admin)
- **Endpoint**: `DELETE /api/admin/blocked-countries/:countryCode`
- **Description**: Removes a country from the blocked list (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `countryCode`: The country code to remove (e.g., "IN").
- **Response (Success - 200)**: 
  ```json
  {
    "message": "Country removed from blocked list"
  }
- **Response (Error - 400, if country is not blocked)**:
  ```json
  {
    "statusCode": 400,
    "message": "Country is not blocked",
    "error": "Bad Request"
  }

### 40. Get Blocked Countries (Admin)
- **Endpoint**: `GET /api/admin/blocked-countries`
- **Description**: Retrieves the list of blocked countries (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**: 
  ```json
  [
  {
    "id": "<blockedCountryId>",
    "country_code": "IN",
    "created_at": "2025-05-15T06:12:00.000Z",
    "updated_at": "2025-05-15T06:12:00.000Z"
  },
  {
    "id": "<blockedCountryId>",
    "country_code": "PK",
    "created_at": "2025-05-15T06:12:00.000Z",
    "updated_at": "2025-05-15T06:12:00.000Z"
  }
  ]

### 41. Get Top Employers (Admin)
- **Endpoint**: `GET /api/admin/leaderboards/top-employers`
- **Description**: Retrieves the top employers by average rating (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**: 
  - `limit` (number, optional): Number of results to return (default: 10).
- **Response (Success - 200)**:   
  ```json
  [
    {
      "userId": "<employerId>",
      "username": "jane_smith113",
      "email": "jane@example.com",
      "averageRating": 4.5
    }
  ]

- **Response (Error - 401, if user is not an admin)**:   
  ```json
  {
    "statusCode": 401,
    "message": "Unauthorized",
    "error": "Unauthorized"
  }

### 42. Get Top Jobseekers (Admin)
- **Endpoint**: `GET /api/admin/leaderboards/top-jobseekers`
- **Description**: Retrieves the top jobseekers by the number of applications (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**: 
  - `limit` (number, optional): Number of results to return (default: 10).
- **Response (Success - 200)**:   
  ```json
  [
    {
      "userId": "<jobseekerId>",
      "username": "john_doe",
      "email": "john@example.com",
      "averageRating": 4
    }
  ]

- **Response (Error - 401, if user is not an admin)**:   
  ```json
  {
    "statusCode": 401,
    "message": "Unauthorized",
    "error": "Unauthorized"
  }  

### 43. Upload Avatar
- **Endpoint**: `POST /api/profile/upload-avatar`
- **Description**: Uploads an avatar image for the authenticated user from their device.
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**: Form-data with a field `avatar` (file: JPEG, JPG, PNG, max 5MB)
- **Response (Success - 200)**: Returns the updated profile (same format as GET /api/profile)

- **Response (Error - 400, if file is missing or invalid)**
      ```json
  {
    "statusCode": 400,
    "message": "Only JPEG, JPG, and PNG files are allowed",
    "error": "Bad Request"
  }

### 44. Upload Identity Document
- **Endpoint**: `POST /api/profile/upload-identity`
- **Description**: Uploads an identity document for verification from the authenticated users device.
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**: Form-data with a field document (file: JPEG, JPG, PNG, PDF, max 10MB)
- **Response (Success - 200)**: Returns the updated profile (same format as GET /api/profile)

- **Response (Error - 400, if file is missing or invalid)**
      ```json
  {
    "statusCode": 400,
    "message": "Only JPEG, JPG, PNG, and PDF files are allowed",
    "error": "Bad Request"
  }

### 45. Verify Identity (Admin)
- **Endpoint**: `POST /api/admin/profile/:id/verify-identity`
- **Description**: Verifies or rejects the identity of a user by setting the identity_verified field (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the user.
- **Request Body**:
  ```json
  {
    "verify": true
  }

- **Response (Success - 200)**: Returns the updated profile (same format as GET /api/profile)

- **Response (Error - 401, if token is invalid or user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Unauthorized",
    "error": "Unauthorized"
  }

- **Response (Error - 401, if verify parameter is invalid)**:
  ```json
  {
    "statusCode": 401,
    "message": "Verify parameter must be a boolean",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if user not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

- **Response (Error - 404, if no document uploaded)**:
  ```json
  {
    "statusCode": 404,
    "message": "No identity document uploaded",
    "error": "Not Found"
  } 

### 46. Set Global Application Limit (Admin)
- **Endpoint**: `POST /api/admin/settings/application-limit`
- **Description**: Sets the global application limit for all job posts (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**:
  ```json
  {
    "limit": 1000
  }

- **Response (Success - 200)**:
  ```json
  {
    "message": "Global application limit updated successfully",
    "limit": 1000
  } 

- **Response (Error - 400, if limit is invalid)**:
  ```json
  {
    "statusCode": 400,
    "message": "Global application limit must be a non-negative number",
    "error": "Bad Request"
  }

- **Response (Error - 401, if user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Unauthorized",
    "error": "Unauthorized"
  }

### 47. Get Global Application Limit (Admin)
- **Endpoint**: `GET /api/admin/settings/application-limit`
- **Description**: Retrieves the global application limit (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**:
  ```json
  {
    "globalApplicationLimit": 1000
  }

- **Response (Error - 401, if user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Unauthorized",
    "error": "Unauthorized"
  }

### 49. Increment Job Post Views
- **Endpoint**: `POST /api/job-posts/:id/increment-view`
- **Description**: Increments the view count for a specific job post.
- **Request Parameters**: `id`: The ID of the job post
- **Response (Success - 200)**:
  ```json
  {
    "message": "View count incremented",
    "views": 1
  }

- **Response (Error - 404, if job post not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found",
    "error": "Not Found"
  }

### 52. Block User (Admin)
- **Endpoint**: `POST /api/admin/users/:id/block`
- **Description**: Blocks a specific user (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the user.
- **Response (Success - 200)**:
  ```json
  {
    "message": "User blocked successfully"
  }

- **Response (Error - 404, if user not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

- **Response (Error - 400, if user already blocked)**:
  ```json
  {
    "statusCode": 400,
    "message": "User is already blocked",
    "error": "Bad Request"
  }

- **Response (Error - 401, if token is invalid or user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 53. Unblock User (Admin)
- **Endpoint**: `POST /api/admin/users/:id/unblock`
- **Description**: Unblocks a specific user (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the user.  
- **Response (Success - 200)**:
  ```json
  {
    "message": "User unblocked successfully"
  }

- **Response (Error - 404, if user not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

- **Response (Error - 400, if user already active)**:
  ```json
  {
    "statusCode": 400,
    "message": "User is already active",
    "error": "Bad Request"
  }

- **Response (Error - 401, if token is invalid or user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 54. Increment Profile Views
- **Endpoint**: `POST /api/profile/:id/increment-view`
- **Description**: Increments the view count for a specific jobseeker's profile.
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the user (jobseeker).
- **Response (Success - 200)**:
  ```json
  {
    "message": "Profile view count incremented",
    "profile_views": 1
  }

- **Response (Error - 404, if user or profile not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

- **Response (Error - 400, if user is not a jobseeker)**:
  ```json
  {
    "statusCode": 400,
    "message": "Profile views can only be incremented for jobseekers",
    "error": "Bad Request"
  }

### 55. Get Top Jobseekers by Profile Views (Admin)
- **Endpoint**: `GET /api/admin/leaderboards/top-jobseekers-by-views`
- **Description**: Retrieves the top jobseekers by profile views (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**: `limit` (number, optional): Number of jobseekers to return (default: 10).
- **Response (Success - 200)**:
  ```json
  [
    {
      "userId": "<jobseekerId>",
      "username": "john_doe",
      "email": "john@example.com",
      "profileViews": 100
    }
  ]

- **Response (Error - 400, if limit is invalid)**:
  ```json
  {
    "statusCode": 400,
    "message": "Limit must be a positive integer",
    "error": "Bad Request"
  }

- **Response (Error - 401, if token is invalid or user is not an admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 56. Export Users to CSV (Admin)
- **Endpoint**: `GET /api/admin/users/export-csv`
- **Description**: Exports all users to a CSV file (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**:
  - Content-Type: `text/csv`
  - Content-Disposition: `attachment; filename="users.csv"`
  - Example file content: User ID,Email,Username,Role,Status,Created At,Updated At
  <userid1>,<a href="mailto:user1@example.com">user1@example.com</a>,user1,jobseeker,active,2025-05-22T10:00:00.000Z,2025-05-22T10:00:00.000Z</userid1>
  <userid2>,<a href="mailto:user2@example.com">user2@example.com</a>,user2,employer,blocked,2025-05-22T11:00:00.000Z,2025-05-22T11:00:00.000Z</userid2>

- **Response (Error - 401, if token is invalid or user is not an admin)**:  
    ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 57. Get Top Employers by Job Posts (Admin)
- **Endpoint**: `GET /api/admin/leaderboards/top-employers-by-posts`
- **Description**: Retrieves the top employers by the number of job posts created (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**: `limit` (number, optional): Number of results to return (default: 10).
- **Response (Success - 200)**:
  ```json
  [
    {
      "userId": "<employerId>",
      "username": "jane_smith",
      "email": "employer@example.com",
      "jobCount": 5
    }
  ]

- **Response (Error - 401, if token is invalid or user is not an admin)**:  
    ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 58. Get Growth Trends (Admin)
- **Endpoint**: `GET /api/admin/analytics/growth-trends`
- **Description**: Retrieves growth trends for registrations and job posts over the last 7 or 30 days, grouped by day (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**: `period` (string, optional): Time period ("7d" or "30d", default: "7d").
- **Response (Success - 200)**:
  ```json
  {
    "registrations": [
      {
        "period": "2025-05-20T00:00:00.000Z",
        "count": 5
      },
      {
        "period": "2025-05-21T00:00:00.000Z",
        "count": 3
      }
    ],
    "jobPosts": [
      {
        "period": "2025-05-20T00:00:00.000Z",
        "count": 2
      },
      {
        "period": "2025-05-21T00:00:00.000Z",
        "count": 4
      }
    ]
  }

- **Response (Error - 401, if token is invalid or user is not an admin)**:  
    ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }  

### 59. Get Recent Registrations (Admin)
- **Endpoint**: `GET /api/admin/analytics/recent-registrations`
- **Description**: Retrieves the last 5 registrations of jobseekers and employers (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**: `limit` (number, optional): Number of results per role (default: 5).
- **Response (Success - 200)**:
  ```json
  {
    "jobseekers": [
      {
        "id": "<userId>",
        "email": "jobseeker@example.com",
        "username": "john_doe",
        "role": "jobseeker",
        "created_at": "2025-05-27T06:00:00.000Z"
      }
    ],
    "employers": [
      {
        "id": "<userId>",
        "email": "employer@example.com",
        "username": "jane_smith",
        "role": "employer",
        "created_at": "2025-05-27T06:00:00.000Z"
      }
    ]
  }

- **Response (Error - 401, if token is invalid or user is not an admin)**:  
    ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }    

### 60. Get Job Posts with Applications (Admin)
- **Endpoint**: `GET /api/admin/job-posts/applications`
- **Description**: Retrieves all job posts with their application counts (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**: `limit` (number, optional): Number of results per role (default: 5).
- **Response (Success - 200)**:
  ```json
  [
    {
      "id": "<jobPostId>",
      "title": "Software Engineer",
      "status": "Active",
      "applicationCount": 10,
      "created_at": "2025-05-27T06:00:00.000Z"
    }
  ]

- **Response (Error - 401, if token is invalid or user is not an admin)**:  
    ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 61. Get Online Users (Admin)
- **Endpoint**: `GET /api/admin/analytics/online-users`
- **Description**: Retrieves the count of online jobseekers and employers (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**:
  ```json
  {
    "jobseekers": 15,
    "employers": 5
  }

- **Response (Error - 401, if token is invalid or user is not an admin)**:  
    ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 62. Get User Online Status
- **Endpoint**: `GET /api/users/:id/online`
- **Description**: Checks if a specific user is online, based on their presence in the Redis store
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the user.
- **Response (Success - 200)**:
  ```json
  {
    "userId": "<userId>",
    "isOnline": true,
    "role": "jobseeker" //  "employer"
  }

- **Response (Error - 401, if token is invalid)**:  
    ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if user not found)**:  
    ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

### 63. Get User Risk Score (Admin)
- **Endpoint**: `GET /api/admin/users/:id/risk-score`
- **Description**: Retrieves the risk score and fraud details for a specific user (admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the user.
- **Response (Success - 200)**:
  ```json
  {
    "userId": "<userId>",
    "riskScore": 50,
    "details": {
      "duplicateIp": true,
      "proxyDetected": false,
      "duplicateFingerprint": false
    }
  }

- **Response (Error - 404, if user not found)**:  
    ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

- **Response (Error - 401, if token is invalid or user is not an admin)**:  
    ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

### 64. Search Talents
- **Endpoint**: `GET /api/talents`
- **Description**: Retrieves a list of freelancers based on specified filters such as skills, experience, description, rating, and timezone, with pagination and sorting options.
- **Request Parameters**:
  - `skills` (string or string[], optional): Filter by skills (e.g., "skills=Python" or "skills[]=Python&skills[]=JavaScript").
  - `experience` (string, optional): Filter by experience (partial match, e.g., "3 years").
  - `description` (string, optional): Filter by description (partial match, e.g., "React developer").
  - `rating` (number, optional): Filter by minimum average rating (0 to 5, e.g., "4").
  - `timezone` (string, optional): Filter by timezone (e.g., "America/New_York").
  - `page` (number, optional): Page number for pagination (default: 1).
  - `limit` (number, optional): Number of items per page (default: 10).
  - `sort_by` (string, optional): Field to sort by ("average_rating" or "profile_views", default: "average_rating").
  - `sort_order` (string, optional): Sort order ("ASC" or "DESC", default: "DESC").
- **Example Request**: `/api/talents?skills=<skillId>&experience=3 years&description=React&rating=4&timezone=America/New_York&page=1&limit=10&sort_by=average_rating&sort_order=DESC`
- **Response (Success - 200)**:
  ```json
  {
    "total": 50,
    "data": [
      {
        "id": "<userId>",
        "username": "john_doe",
        "email": "john@example.com",
        "skills": [
          {
            "id": "<skillId>",
            "name": "Web Development",
            "parent_id": "<parentSkillId>"
          }
        ],
        "experience": "3 years",
        "description": "Experienced web developer specializing in React and Node.js",
        "portfolio": "https://portfolio.com",
        "video_intro": "https://video.com",
        "timezone": "America/New_York",
        "currency": "USD",
        "average_rating": 4.5,
        "profile_views": 100,
        "identity_verified": true,
        "avatar": "/uploads/avatars/<filename>"
      }
    ]
  }

- **Response (Error - 400, if invalid parameters)**:
  ```json
  {
    "statusCode": 400,
    "message": "Rating must be between 0 and 5",
    "error": "Bad Request"
  }

### 65. Submit Complaint
- **Endpoint**: `POST /api/complaints`
- **Description**: Allows authenticated jobseekers or employers to submit a complaint against a job post or another user's profile.
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**:
  ```json
  {
    "job_post_id": "<jobPostId>", // Optional, if complaining about a job post
    "profile_id": "<userId>", // Optional, if complaining about a profile
    "reason": "Inappropriate content in the job description"
  }

- **Response (Success - 200)**:
  ```json
  {
    "id": "<complaintId>",
    "complainant_id": "<userId>",
    "job_post_id": "<jobPostId>",
    "profile_id": null,
    "reason": "Inappropriate content in the job description",
    "status": "Pending",
    "created_at": "2025-06-06T12:00:00.000Z",
    "updated_at": "2025-06-06T12:00:00.000Z"
  }

- **Response (Error - 400, if both or neither IDs provided)**:
  ```json
  {
    "statusCode": 400,
    "message": "Either job_post_id or profile_id must be provided",
    "error": "Bad Request"
  }

- **Response (Error - 400, if complaining about own profile)**:
  ```json
  {
    "statusCode": 400,
    "message": "Cannot submit a complaint against your own profile",
    "error": "Bad Request"
  }  

- **Response (Error - 400, if complaint already exists)**:
  ```json
  {
    "statusCode": 400,
    "message": "You have already submitted a pending complaint for this target",
    "error": "Bad Request"
  }    

- **Response (Error - 401, if token invalid)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if target not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found",
    "error": "Not Found"
  }

### 66. Get All Complaints (Admin)
- **Endpoint**: `GET /api/admin/complaints`
- **Description**: Retrieves all complaints for admin review.
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**:
  ```json
  [
    {
      "id": "<complaintId>",
      "complainant_id": "<userId>",
      "complainant": {
        "id": "<userId>",
        "username": "john_doe",
        "email": "john@example.com",
        "role": "jobseeker"
      },
      "job_post_id": "<jobPostId>",
      "job_post": {
        "id": "<jobPostId>",
        "title": "Software Engineer",
        "description": "Looking for a skilled engineer"
      },
      "profile_id": null,
      "reason": "Inappropriate content in the job description",
      "status": "Pending",
      "created_at": "2025-06-06T12:00:00.000Z",
      "updated_at": "2025-06-06T12:00:00.000Z"
    }
  ]

- **Response (Error - 401, if not admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only admins can view complaints",
    "error": "Unauthorized"
  }

### 67. Resolve Complaint (Admin)
- **Endpoint**: `POST /api/admin/complaints/:id/resolve`
- **Description**: Allows admins to resolve or reject a complaint with an optional comment.
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the complaint.
- **Request Body**:
  ```json
  {
    "status": "Resolved",
    "comment": "Issue addressed with the user"
  }

- **Response (Success - 200)**:
  ```json
  {
    "id": "<complaintId>",
    "complainant_id": "<userId>",
    "job_post_id": "<jobPostId>",
    "profile_id": null,
    "reason": "Inappropriate content in the job description",
    "status": "Resolved",
    "resolution_comment": "Issue addressed with the user",
    "created_at": "2025-06-06T12:00:00.000Z",
    "updated_at": "2025-06-06T12:30:00.000Z"
  }

- **Response (Error - 401, if not admin)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only admins can resolve complaints",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if complaint not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "Complaint not found",
    "error": "Not Found"
  }

### 68. Get Public Statistics
- **Endpoint**: `GET /api/stats`
- **Description**: Retrieves public statistics about the platform, including the total number of resumes (jobseeker profiles), job posts, and employers. Accessible to both authenticated and unauthenticated users.
- **Headers**: None (optional `Authorization: Bearer <token>` for authenticated users, but not required)
- **Request Parameters**: None
- **Response (Success - 200)**:
  ```json
  {
    "totalResumes": 150,
    "totalJobPosts": 300,
    "totalEmployers": 50
  }

### 68. Approve Job Post (Moderator)
- **Endpoint**: `POST api/moderator/job-posts/:id/approve`
- **Description**: Approves a job post by setting pending_review to false (moderator or admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the job post.
- **Response (Success - 200)**:
  ```json
  {
    "id": "<jobPostId>",
    "title": "Software Engineer",
    "description": "We are looking for a skilled software engineer...",
    "location": "Remote",
    "salary": 50000,
    "status": "Active",
    "pending_review": false,
    "category_id": "<categoryId>",
    "job_type": "Full-time",
    "employer_id": "<employerId>",
    "applicationLimit": 100,
    "created_at": "2025-06-15T06:00:00.000Z",
    "updated_at": "2025-06-15T06:00:00.000Z"
  }

- **Response (Error - 404, if job post not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found",
    "error": "Not Found"
  }

- **Response (Error - 401, if not authorized)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only moderators or admins can access this resource",
    "error": "Unauthorized"
  }

### 69. Flag Job Post (Moderator)
- **Endpoint**: `POST api/moderator/job-posts/:id/flag`
- **Description**: Flags a job post for review by setting pending_review to true (moderator or admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the job post.
- **Response (Success - 200)**:
  ```json
  {
    "id": "<jobPostId>",
    "title": "Software Engineer",
    "description": "We are looking for a skilled software engineer...",
    "location": "Remote",
    "status": "Active",
    "pending_review": true,
    "category_id": "<categoryId>",
    "job_type": "Full-time",
    "employer_id": "<employerId>",
    "applicationLimit": 100,
    "created_at": "2025-06-15T06:00:00.000Z",
    "updated_at": "2025-06-15T06:00:00.000Z"
  }

- **Response (Error - 404, if job post not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found",
    "error": "Not Found"
  }

- **Response (Error - 404, if job post not found)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only moderators or admins can access this resource",
    "error": "Unauthorized"
  }

### 70. Get All Reviews (Moderator)
- **Endpoint**: `GET api/moderator/reviews`
- **Description**: Retrieves all reviews (moderator or admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**:
  ```json
  [
    {
      "id": "<reviewId>",
      "reviewer_id": "<userId>",
      "reviewed_id": "<userId>",
      "job_application_id": "<jobApplicationId>",
      "rating": 4,
      "comment": "Great work, very professional!",
      "reviewer": {
        "id": "<userId>",
        "email": "employer4@example.com",
        "username": "employer4",
        "role": "employer"
      },
      "reviewed": {
        "id": "<userId>",
        "email": "jobseeker1@example.com",
        "username": "jobseeker1",
        "role": "jobseeker"
      },
      "job_application": {
        "id": "<jobApplicationId>",
        "job_post_id": "<jobPostId>",
        "job_seeker_id": "<userId>",
        "status": "Accepted"
      },
      "created_at": "2025-06-13T18:00:00.000Z",
      "updated_at": "2025-06-13T18:00:00.000Z"
    }
  ]

- **Response (Error - 401, if not authorized)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only moderators or admins can access this resource",
    "error": "Unauthorized"
  }

### 71. Delete Review (Moderator)
- **Endpoint**: `DELETE api/moderator/reviews/:id`
- **Description**: Deletes a specific review (moderator or admin only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the review.
- **Response (Success - 200)**:
  ```json
  {
    "message": "Review deleted successfully"
  }

- **Response (Error - 404, if review not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "Review not found",
    "error": "Not Found"
  }

- **Response (Error - 401, if not authorized)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only moderators or admins can access this resource",
    "error": "Unauthorized"
  }

### 72. Get All Complaints (Moderator)
- **Endpoint**: `GET api/moderator/complaints`
- **Description**: Retrieves all complaints for moderator review.
- **Headers**: `Authorization: Bearer <token>`
- **Response (Success - 200)**:
  ```json
  [
    {
      "id": "<complaintId>",
      "complainant_id": "<userId>",
      "complainant": {
        "id": "<userId>",
        "username": "john_doe",
        "email": "john@example.com",
        "role": "jobseeker"
      },
      "job_post_id": "<jobPostId>",
      "job_post": {
        "id": "<jobPostId>",
        "title": "Software Engineer",
        "description": "Looking for a skilled engineer"
      },
      "profile_id": null,
      "reason": "Inappropriate content in the job description",
      "status": "Pending",
      "created_at": "2025-06-06T12:00:00.000Z",
      "updated_at": "2025-06-06T12:00:00.000Z"
    }
  ]

- **Response (Error - 401, if not authorized)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only moderators or admins can access this resource",
    "error": "Unauthorized"
  }

### 73. Resolve Complaint (Moderator)
- **Endpoint**: `POST api/moderator/complaints/:id/resolve`
- **Description**: Allows moderators to resolve or reject a complaint with an optional comment.
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the complaint.
- **Request Body**:
  ```json
  {
    "status": "Resolved",
    "comment": "Issue addressed with the user"
  }

- **Response (Success - 200)**:
  ```json
  {
    "id": "<complaintId>",
    "complainant_id": "<userId>",
    "job_post_id": "<jobPostId>",
    "profile_id": null,
    "reason": "Inappropriate content in the job description",
    "status": "Resolved",
    "resolution_comment": "Issue addressed with the user",
    "created_at": "2025-06-06T12:00:00.000Z",
    "updated_at": "2025-06-06T12:30:00.000Z"
  }

- **Response (Error - 401, if not authorized)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only moderators or admins can access this resource",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if complaint not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "Complaint not found",
    "error": "Not Found"
  }

### 74. Notify Job Seekers (Admin)
- **Endpoint**: `POST /api/admin/job-posts/:id/notify-candidates`
- **Description**: Sends email notifications to job seekers whose selected categories match the category of the specified job post. Allows selecting the number of recipients and the order of selection based on signup date.
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the job post
- **Request Body**:
  ```json
  {
    "limit": 50,
    "orderBy": "end" // Options: "beginning", "end", "random"
  }

- **Response (Success - 200)**:
  ```json
  {
    "total": 120,
    "sent": 50,
    "jobPostId": "<jobPostId>"
  }

- **Response (Error - 400, invalid input)**:
  ```json
  {
    "statusCode": 400,
    "message": "Limit must be a positive integer",
    "error": "Bad Request"
  }

- **Response (Error - 400, no category)**:
  ```json
  {
    "statusCode": 400,
    "message": "Job post has no category assigned",
    "error": "Bad Request"
  }

- **Response (Error - 401, unauthorized)**:
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 404, job post not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "Job post not found",
    "error": "Not Found"
  }

### 75. Get Chat History (Admin)
- **Endpoint**: `GET /api/admin/chat/:jobApplicationId`
- **Description**: Retrieves the chat history for a specific job application. Accessible only to users with the admin role.
- **Headers**: `Authorization: Bearer <token>` (Required, JWT token).
- **Path Parameters**: `jobApplicationId` (string, required): The ID of the job application.
- **Query Parameters**:
  - `page` (number, optional): Page number for pagination (default: 1).
  - `limit` (number, optional): Number of messages per page (default: 10).
- **Response (Success - 200)**:
  ```json
  {
    "total": 50,
    "data": [
      {
        "id": "<messageId>",
        "job_application_id": "<jobApplicationId>",
        "sender_id": "<userId>",
        "sender": {
          "id": "<userId>",
          "username": "john_doe",
          "email": "john@example.com",
          "role": "jobseeker"
        },
        "recipient_id": "<userId>",
        "recipient": {
          "id": "<userId>",
          "username": "jane_smith",
          "email": "jane@example.com",
          "role": "employer"
        },
        "content": "Hello, let's discuss the project!",
        "created_at": "2025-06-16T05:47:00.000Z",
        "is_read": false
      }
    ]
  }

- **Response (Error - 401, if token is invalid or user is not an admin)**:  
  ```json
  {
    "statusCode": 401,
    "message": "Invalid token",
    "error": "Unauthorized"
  }

- **Response (Error - 400, if pagination parameters are invalid)**:  
  ```json
  {
    "statusCode": 400,
    "message": "Page must be a positive integer",
    "error": "Bad Request"
  }

- **Response (Error - 404, if job application not found)**:  
  ```json
  {
    "statusCode": 404,
    "message": "Job application not found",
    "error": "Not Found"
  }

### 76. Get All Job Posts (Moderator)
- **Endpoint**: `GET /api/moderator/job-posts`
- **Description**: Retrieves all job posts (moderator or admin only) with optional filters, pagination, and sorting. Supports filtering by status, pending review status, and job title (partial match). Returns total count and paginated data for frontend pagination.
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**:
  - `status` (string, optional): Filter by status ("Active", "Draft", "Closed").
  - `pendingReview` (string, optional): Filter by pending review status ("true" or "false").
  - `title` (string, optional): Filter by job title (partial match, case-insensitive).
  - `page` (number, optional): Page number for pagination (default: 1).
  - `limit` (number, optional): Number of items per page (default: 10).
- **Example Request**: `/api/moderator/job-posts?status=Active&pendingReview=false&title=Software&page=1&limit=10`
- **Response (Success - 200)**:
  ```json
  {
    "total": 50,
    "data": [
      {
        "id": "<jobPostId>",
        "title": "Software Engineer",
        "description": "We are looking for a skilled software engineer...",
        "location": "Remote",
        "salary": 50000,
        "status": "Active",
        "pending_review": false,
        "category_id": "<categoryId>",
        "category": {
          "id": "<categoryId>",
          "name": "Software Development",
          "created_at": "2025-05-15T06:12:00.000Z",
          "updated_at": "2025-05-15T06:12:00.000Z"
        },
        "job_type": "Full-time",
        "employer_id": "<employerId>",
        "employer": {
          "id": "<employerId>",
          "email": "employer100@example.com",
          "username": "jane_smith100",
          "role": "employer"
        },
        "views": 0,
        "required_skills": ["JavaScript", "TypeScript"],
        "created_at": "2025-05-15T06:12:00.000Z",
        "updated_at": "2025-05-15T06:12:00.000Z"
      }
    ]
  }
- **Response (Error - 400, if pagination parameters incorrect)**:
  ```json
  {
    "statusCode": 400,
    "message": "Page must be a positive integer",
    "error": "Bad Request"
  }
- **Response (Error - 401, if not authorized)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only moderators or admins can access this resource",
    "error": "Unauthorized"
  }

### 77. Submit Platform Feedback
- **Endpoint**: `POST /api/platform-feedback`
- **Description**: Allows authenticated jobseekers or employers to submit feedback or success stories about the platform.
- **Headers**: `Authorization: Bearer <token>`
- **Request Body**:
  ```json
  {
    "rating": 4,
    "description": "Found an amazing employer through the platform!"
  }

- **Response (Success - 200)**:
  ```json
  {
    "id": "<feedbackId>",
    "user_id": "<userId>",
    "rating": 4,
    "description": "Found an amazing employer through the platform!",
    "created_at": "2025-07-08T07:00:00.000Z",
    "updated_at": "2025-07-08T07:00:00.000Z"
  }

- **Response (Error - 400, if rating is invalid)**:
  ```json
  {
    "statusCode": 400,
    "message": "Rating must be between 1 and 5",
    "error": "Bad Request"
  }

- **Response (Error - 400, if description is missing)**:
  ```json
  {
    "statusCode": 400,
    "message": "Description is required",
    "error": "Bad Request"
  }

- **Response (Error - 401, if token is invalid or user is not jobseeker/employer)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only jobseekers and employers can submit platform feedback",
    "error": "Unauthorized"
  }

- **Response (Error - 404, if user not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "User not found",
    "error": "Not Found"
  }

### 78. Get Platform Feedback (Public)
- **Endpoint**: `GET /api/platform-feedback`
- **Description**: Retrieves a paginated list of platform feedback and success stories, accessible to all users (including unauthenticated).
- **Query Parameters**:
    - `page` (number, optional): Page number for pagination (default: 1).
    - `limit` (number, optional): Number of items per page (default: 10).
- **Example Request**: `/api/platform-feedback?page=1&limit=10`
- **Response (Success - 200)**:
  ```json
  {
    "total": 50,
    "data": [
      {
        "id": "<feedbackId>",
        "rating": 4,
        "description": "Found an amazing employer through the platform!",
        "created_at": "2025-07-08T07:00:00.000Z",
        "updated_at": "2025-07-08T07:00:00.000Z",
        "user": {
          "id": "<userId>",
          "username": "john_doe",
          "role": "jobseeker"
        }
      }
    ]
  }

- **Response (Error - 400, if pagination parameters are invalid)**:
  ```json
  {
    "statusCode": 400,
    "message": "Page must be a positive integer",
    "error": "Bad Request"
  }

### 79. Get Platform Feedback (Admin/Moderator)
- **Endpoint**: `GET /api/admin/platform-feedback`
- **Description**: Retrieves a paginated list of platform feedback for admin or moderator review.
- **Headers**: `Authorization: Bearer <token>`
- **Query Parameters**:
    - `page` (number, optional): Page number for pagination (default: 1).
    - `limit` (number, optional): Number of items per page (default: 10).
- **Example Request**: `/api/admin/platform-feedback?page=1&limit=10`
- **Response (Success - 200)**:
  ```json
  {
    "total": 50,
    "data": [
      {
        "id": "<feedbackId>",
        "user_id": "<userId>",
        "rating": 4,
        "description": "Found an amazing employer through the platform!",
        "created_at": "2025-07-08T07:00:00.000Z",
        "updated_at": "2025-07-08T07:00:00.000Z",
        "user": {
          "id": "<userId>",
          "username": "john_doe",
          "role": "jobseeker"
        }
      }
    ]
  }

- **Response (Error - 400, if pagination parameters are invalid)**:
  ```json
  {
    "statusCode": 400,
    "message": "Page must be a positive integer",
    "error": "Bad Request"
  }

- **Response (Error - 401, if token is invalid or user is not an admin/moderator)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only admins or moderators can access this resource",
    "error": "Unauthorized"
  }

### 80. Delete Platform Feedback (Admin/Moderator)
- **Endpoint**: `DELETE /api/admin/platform-feedback/:id`
- **Description**: Deletes a specific platform feedback entry (admin or moderator only).
- **Headers**: `Authorization: Bearer <token>`
- **Request Parameters**: `id`: The ID of the feedback.
- **Example Request**: `/api/admin/platform-feedback?page=1&limit=10`
- **Response (Success - 200)**:
  ```json
  {
    "message": "Platform feedback deleted successfully"
  }

- **Response (Error - 404, if feedback not found)**:
  ```json
  {
    "statusCode": 404,
    "message": "Platform feedback not found",
    "error": "Not Found"
  }

- **Response (Error - 401, if token is invalid or user is not an admin/moderator)**:
  ```json
  {
    "statusCode": 401,
    "message": "Only admins or moderators can access this resource",
    "error": "Unauthorized"
  }